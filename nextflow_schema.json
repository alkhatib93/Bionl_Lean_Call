{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/alkhatib93/Bionl_Lean_Call/main/nextflow_schema.json",
  "title": "Bionl_Lean_Call parameters",
  "description": "A germline variant-calling workflow focused on ACMG Secondary Findings (research use only), with standardized QC, annotation, and per-sample reports.",
  "type": "object",
  "$defs": {
    "io_options": {
      "title": "Input / Output",
      "type": "object",
      "fa_icon": "fas fa-terminal",
      "description": "Where to find the samplesheet and where to write results.",
      "help_text": "Specify the samplesheet CSV and the output directory.",
      "required": ["samplesheet", "outdir"],
      "properties": {
        "samplesheet": {
          "type": "string",
          "description": "Path to the CSV file containing sample information.",
          "help_text": "A comma-separated file listing patient/sample identifiers and FASTQ/VCF paths.",
          "fa_icon": "fas fa-file-csv",
          "format": "file-path",
          "mimetype": "text/csv",
          "pattern": "^\\S+\\.csv$"
        },
        "outdir": {
          "type": "string",
          "description": "Directory where analysis results will be saved.",
          "help_text": "Results are organized by step with subfolders for qc/, vcf/, and reports/.",
          "fa_icon": "fas fa-folder-open",
          "format": "directory-path"
        }
      }
    },
    "post_sarek": {
      "title": "Post-Sarek annotation options",
      "type": "object",
      "fa_icon": "fas fa-dna",
      "description": "VEP and annotation resources (paths can be local or cloud URIs like gs://).",
      "properties": {
        "vep_cache": {
          "type": "string",
          "description": "Path/URI to the VEP cache root.",
          "fa_icon": "fas fa-cloud-download-alt",
          "format": "directory-path"
        },
        "vep_fasta": {
          "type": "string",
          "description": "Reference FASTA for VEP.",
          "fa_icon": "fas fa-file",
          "format": "file-path",
          "pattern": "^\\S+\\.f(ast)?a(\\.gz)?$"
        },
        "gnomad_vcf": {
          "type": "string",
          "description": "gnomAD VCF for annotation.",
          "fa_icon": "fas fa-file",
          "format": "file-path",
          "pattern": "^\\S+\\.vcf(\\.gz)?$"
        },
        "revel_vcf": {
          "type": "string",
          "description": "REVEL table/VCF (bgzipped).",
          "fa_icon": "fas fa-file",
          "format": "file-path",
          "pattern": "^\\S+\\.(vcf|tsv)(\\.gz)?$"
        },
        "alpha_missense_vcf": {
          "type": "string",
          "description": "AlphaMissense table/VCF (bgzipped).",
          "fa_icon": "fas fa-file",
          "format": "file-path",
          "pattern": "^\\S+\\.(vcf|tsv)(\\.gz)?$"
        },
        "clinvar_vcf": {
          "type": "string",
          "description": "ClinVar VCF (bgzipped).",
          "fa_icon": "fas fa-file",
          "format": "file-path",
          "pattern": "^\\S+\\.vcf(\\.gz)?$"
        },
        "vep_plugins": {
          "type": "string",
          "description": "Directory with VEP plugins (e.g. loftee).",
          "fa_icon": "fas fa-folder-open",
          "format": "directory-path"
        }
      }
    }
  },
  "allOf": [
    { "$ref": "#/$defs/io_options" },
    { "$ref": "#/$defs/post_sarek" }
  ],
  "additionalProperties": true
}
