// ------------------------------------------------------------
// Resource overrides for upstream Sarek / heavy tools
// (No containers here â€” containers live in nextflow.config)
// ------------------------------------------------------------

process {
  // Merge BAMs / Gather
  withName: /.*(Merge(Sam|Bam)|MergeBamAlignment|GatherBamFiles).*/ {
    cpus = 24; memory = '30 GB'; time = '24h'
  }

  // BWA
  withName: /.*(BWA).*/ {
    cpus = 24; memory = '30 GB'; time = '24h'
  }

  // Generic merges
  withName: /.*(MERGE_BAM|MERGE_CRAM).*/ {
    cpus = 24; memory = '30 GB'; time = '24h'
  }

  // GATK family
  withName: /.*(GATK).*/ {
    cpus = 12; memory = '4 GB'; time = '24h'
  }

  // DeepVariant
  withName: /.*(DEEPVARIANT).*/ {
    cpus = 24; memory = '30 GB'; time = '24h'
  }

  // MultiQC
  withName: /.*(MULTIQC).*/ {
    cpus = 12; memory = '12 GB'; time = '24h'
  }

  // Indexing
  withName: /.*(SAMTOOLS_INDEX|BuildBamIndex|BamIndex|IndexBam|IndexFeatureFile).*/ {
    cpus = 6; memory = '4 GB'; time = '8h'
  }
  
  withName: /(?i)(BWA|MARKDUPLICATES|DEEPVARIANT|VEP|MOSDEPTH)/ {
    maxRetries = 4
  }
}
